import{j as e,k as j}from"./index-BThHGMjS.js";import{b as E,e as C,r as m}from"./vendor-DPNQA5jQ.js";import{m as S}from"./mockSuppliers-Buh3I-tH.js";import{A as k}from"./arrow-left-NzJBIhxD.js";import{S as F}from"./save-SP1NXFyK.js";const P={id:"",name:"",companyName:"",logo:"",description:"",contactEmail:"",contactPhone:"",address:{street:"",city:"",state:"",zipCode:"",country:"USA"},status:"active",notes:"",createdAt:new Date().toISOString()},$=({mode:d})=>{const p=E(),{id:x}=C(),[s,h]=m.useState(P),[v,N]=m.useState(d==="edit"),[n,u]=m.useState({}),[y,f]=m.useState(!1);m.useEffect(()=>{if(d==="edit"&&x){const r=setTimeout(()=>{const o=S.find(t=>t.id===x);o&&h(o),N(!1)},1e3);return()=>clearTimeout(r)}},[x,d]);const g=(r,o)=>{if(!o&&["name","contactEmail","contactPhone"].includes(r))return`${r} is required`;switch(r){case"contactEmail":return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)?"":"Invalid email format";case"contactPhone":return o?/^[\d\s-()]+$/.test(o)?"":"Invalid phone format":"";default:return""}},a=(r,o)=>{const{name:t,value:l}=r.target,c=g(t,l);u(c?i=>({...i,[t]:c}):i=>{const b={...i};return delete b[t],b}),h(o==="address"?i=>({...i,address:{...i.address,[t]:l}}):i=>({...i,[t]:l}))},w=async r=>{r.preventDefault();const o={};if(["name","contactEmail","contactPhone"].forEach(t=>{const l=s[t];if(typeof l=="string"&&!l)o[t]=`${t} is required`;else if(t==="contactEmail"){const c=g("contactEmail",l);c&&(o.contactEmail=c)}}),Object.keys(o).length>0){u(o),window.scrollTo({top:0,behavior:"smooth"});return}try{f(!0),await new Promise(t=>setTimeout(t,1e3)),console.log(d==="create"?"Creating new supplier:":"Updating supplier:",s),p("/admin/suppliers")}catch(t){console.error("Error al guardar proveedor:",t),u({form:"Error al guardar los cambios. IntÃ©ntalo de nuevo."})}finally{f(!1)}};return v?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(j,{})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>p("/admin/suppliers"),className:"flex items-center justify-center p-2 rounded-full bg-gray-100 hover:bg-gray-200",children:e.jsx(k,{className:"h-5 w-5 text-gray-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:d==="create"?"Add New Supplier":"Edit Supplier"})]})}),n.form&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.form}),e.jsxs("form",{onSubmit:w,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Supplier Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:a,className:`w-full px-3 py-2 border ${n.name?"border-red-300":"border-gray-300"} rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500`,placeholder:"Enter supplier name"}),n.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"companyName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),e.jsx("input",{type:"text",id:"companyName",name:"companyName",value:s.companyName||"",onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter company name (optional)"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"contactEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:["Contact Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",id:"contactEmail",name:"contactEmail",value:s.contactEmail,onChange:a,className:`w-full px-3 py-2 border ${n.contactEmail?"border-red-300":"border-gray-300"} rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500`,placeholder:"Enter contact email"}),n.contactEmail&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.contactEmail})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"contactPhone",className:"block text-sm font-medium text-gray-700 mb-1",children:["Contact Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"contactPhone",name:"contactPhone",value:s.contactPhone,onChange:a,className:`w-full px-3 py-2 border ${n.contactPhone?"border-red-300":"border-gray-300"} rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500`,placeholder:"Enter contact phone"}),n.contactPhone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.contactPhone})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",rows:3,value:s.description||"",onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter supplier description (optional)"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{id:"status",name:"status",value:s.status,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Address Information"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address"}),e.jsx("input",{type:"text",id:"street",name:"street",value:s.address.street,onChange:r=>a(r,"address"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter street address"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),e.jsx("input",{type:"text",id:"city",name:"city",value:s.address.city,onChange:r=>a(r,"address"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter city"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),e.jsx("input",{type:"text",id:"state",name:"state",value:s.address.state,onChange:r=>a(r,"address"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter state"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Zip Code"}),e.jsx("input",{type:"text",id:"zipCode",name:"zipCode",value:s.address.zipCode,onChange:r=>a(r,"address"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter zip code"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),e.jsx("input",{type:"text",id:"country",name:"country",value:s.address.country,onChange:r=>a(r,"address"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter country"})]})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"minOrderValue",className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Order Value (USD)"}),e.jsx("input",{type:"number",id:"minOrderValue",name:"minOrderValue",value:s.minOrderValue||"",onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter minimum order value"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"deliveryTime",className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Time"}),e.jsx("input",{type:"text",id:"deliveryTime",name:"deliveryTime",value:s.deliveryTime||"",onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g. 3-5 business days"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{id:"notes",name:"notes",rows:4,value:s.notes||"",onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter any additional notes about this supplier"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>p("/admin/suppliers"),className:"px-6 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:y,className:"flex items-center gap-2 px-6 py-2 bg-primary-600 text-white rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[y?e.jsx(j,{size:"sm"}):e.jsx(F,{className:"h-4 w-4"}),y?"Saving...":"Save Supplier"]})]})]})]})};export{$ as S};
