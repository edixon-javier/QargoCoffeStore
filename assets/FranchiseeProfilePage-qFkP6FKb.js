import{f,j as e,g as j}from"./index-BSNPDyZS.js";import{r as c}from"./vendor-DPNQA5jQ.js";import{M as v}from"./Modal-nJFDht8j.js";import{C}from"./check-BW0EXg4G.js";import{D as w}from"./DashboardNav-Br8Ghx5d.js";import"./shopping-bag-4n1mIH-r.js";const I=()=>{const{user:l}=f(),[a,m]=c.useState(!1),[N,g]=c.useState(!1),[o,p]=c.useState({}),u=()=>{if(l!=null&&l.franchiseeId){const t=j.find(i=>i.id===l.franchiseeId);if(t!=null&&t.billingInfo)return console.log("Datos de franquiciado encontrados:",t.billingInfo),t.billingInfo}const r=localStorage.getItem("franchiseeBillingInfo");return r?JSON.parse(r):{companyName:"",dba:"",billingAddress:{street:"",city:"",state:"",zipCode:""},shippingAddress:{street:"",city:"",state:"",zipCode:""},email:"",phone:"",paymentMethod:{type:"credit_card",cardNumber:"",expiryDate:"",cvv:"",cardholderName:""}}},[s,n]=c.useState(u());c.useEffect(()=>{n(u())},[l==null?void 0:l.franchiseeId]);const h=(r,t)=>{if(!t)return`${r} is required`;switch(r){case"email":return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?"":"Invalid email format";case"phone":return/^[\d\s-()]+$/.test(t)?"":"Invalid phone format";case"cardNumber":return/^\d{16}$/.test(t.replace(/\s/g,""))?"":"Invalid card number";case"cvv":return/^\d{3,4}$/.test(t)?"":"Invalid CVV";case"expiryDate":return/^(0[1-9]|1[0-2])\/([0-9]{2})$/.test(t)?"":"Invalid expiry date (MM/YY)";case"zipCode":return/^\d{5}(-\d{4})?$/.test(t)?"":"Invalid ZIP code";default:return t.length<2?"Field is too short":""}},b=(r,t,i)=>{const d=h(r,t);p(x=>({...x,[r]:d})),n(x=>({...x,[r]:t}))},y=()=>{const r={};if(["companyName","email","phone"].forEach(t=>{const i=s[t];if(typeof i=="string"){const d=h(t,i);d&&(r[t]=d)}}),["street","city","state","zipCode"].forEach(t=>{const i=s.billingAddress[t],d=h(t,i);d&&(r[`billingAddress.${t}`]=d)}),Object.keys(r).length>0){p(r);return}localStorage.setItem("franchiseeBillingInfo",JSON.stringify(s)),m(!1),g(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("form",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-medium",children:"Profile & Billing Information"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your business profile and payment methods"})]}),e.jsx("div",{className:"flex gap-2",children:a?e.jsx("button",{onClick:y,className:"bg-primary-600 hover:bg-primary-700 text-white py-2 px-4 rounded",children:"Save Changes"}):e.jsx("button",{onClick:()=>m(!0),className:"bg-primary-600 hover:bg-primary-700 text-white py-2 px-4 rounded",children:"Edit Profile"})})]}),e.jsxs("div",{className:`space-y-6 ${a?"editing-mode":""}`,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),"              ",a?e.jsxs("div",{children:[e.jsx("input",{type:"text",value:s.companyName,onChange:r=>b("companyName",r.target.value),className:`w-full p-2 border ${o.companyName?"border-red-500":"border-gray-300"} rounded focus:ring-2 focus:ring-primary focus:border-transparent`,placeholder:"Enter company name",required:!0}),o.companyName&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.companyName})]}):e.jsx("p",{className:"text-gray-900",children:s.companyName||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DBA (Doing Business As)"}),a?e.jsx("input",{type:"text",value:s.dba,onChange:r=>n({...s,dba:r.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent"}):e.jsx("p",{className:"text-gray-900",children:s.dba||"Not set"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Billing Address"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:a?e.jsx("input",{type:"text",value:s.billingAddress.street,onChange:r=>n({...s,billingAddress:{...s.billingAddress,street:r.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Street Address"}):e.jsx("p",{className:"text-gray-900",children:s.billingAddress.street||"Not set"})}),e.jsx("div",{children:a?e.jsx("input",{type:"text",value:s.billingAddress.city,onChange:r=>n({...s,billingAddress:{...s.billingAddress,city:r.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"City"}):e.jsx("p",{className:"text-gray-900",children:s.billingAddress.city||"Not set"})}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:a?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:s.billingAddress.state,onChange:r=>n({...s,billingAddress:{...s.billingAddress,state:r.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"State"}),e.jsx("input",{type:"text",value:s.billingAddress.zipCode,onChange:r=>n({...s,billingAddress:{...s.billingAddress,zipCode:r.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"ZIP Code"})]}):e.jsxs("p",{className:"text-gray-900 col-span-2",children:[s.billingAddress.state," ",s.billingAddress.zipCode]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a?e.jsxs("div",{children:[e.jsx("input",{type:"email",value:s.email,onChange:r=>b("email",r.target.value),className:`w-full p-2 border ${o.email?"border-red-500":"border-gray-300"} rounded focus:ring-2 focus:ring-primary focus:border-transparent`,placeholder:"Enter email address",required:!0}),o.email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.email})]}):e.jsx("p",{className:"text-gray-900",children:s.email||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),a?e.jsx("input",{type:"tel",value:s.phone,onChange:r=>n({...s,phone:r.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent"}):e.jsx("p",{className:"text-gray-900",children:s.phone||"Not set"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Payment Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number"}),a?e.jsx("input",{type:"text",value:s.paymentMethod.cardNumber,onChange:r=>n({...s,paymentMethod:{...s.paymentMethod,cardNumber:r.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"**** **** **** ****"}):e.jsx("p",{className:"text-gray-900",children:s.paymentMethod.cardNumber?"****"+s.paymentMethod.cardNumber.slice(-4):"Not set"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),a?e.jsx("input",{type:"text",value:s.paymentMethod.expiryDate,onChange:r=>n({...s,paymentMethod:{...s.paymentMethod,expiryDate:r.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"MM/YY"}):e.jsx("p",{className:"text-gray-900",children:s.paymentMethod.expiryDate||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVV"}),a?e.jsx("input",{type:"password",value:s.paymentMethod.cvv,onChange:r=>n({...s,paymentMethod:{...s.paymentMethod,cvv:r.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"***",maxLength:4}):e.jsx("p",{className:"text-gray-900",children:"***"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cardholder Name"}),a?e.jsx("input",{type:"text",value:s.paymentMethod.cardholderName,onChange:r=>n({...s,paymentMethod:{...s.paymentMethod,cardholderName:r.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent"}):e.jsx("p",{className:"text-gray-900",children:s.paymentMethod.cardholderName||"Not set"})]})]})]})]}),e.jsx("div",{className:"flex justify-end gap-4 mt-8",children:a?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>{m(!1),p({}),n(u())},className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),e.jsx("button",{type:"button",onClick:y,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})]}):e.jsx("button",{type:"button",onClick:()=>m(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Edit Information"})})]})]})}),e.jsx(v,{isOpen:N,onClose:()=>g(!1),title:"Changes Saved Successfully",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(C,{className:"w-6 h-6 text-green-600"})})}),e.jsx("p",{className:"text-center text-gray-600",children:"Your profile and billing information has been updated successfully."}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Got it"})})]})})]})},$=()=>(f(),e.jsxs("div",{className:"container-custom py-8",children:[e.jsx(w,{}),e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-8 mt-8",children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-serif",children:"Profile & Billing Settings"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your business information and payment methods"})]})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-6",children:e.jsx(I,{})})]})]}));export{$ as default};
