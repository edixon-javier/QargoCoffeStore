import{u as f,d as y,e as N,j as e}from"./index-DGeeWcuk.js";import{b as v,r as u,e as p}from"./vendor-BlcjAmUP.js";import{f as g}from"./utils-Dup6WxmZ.js";const j={companyName:"Prestige Cafe",dba:"Qargo Coffee Dearborne",billingAddress:{street:"22022 Michigan Ave Unit C",city:"Dearborn",state:"MI",zipCode:"48124-2889"},shippingAddress:{street:"22022 Michigan Ave Unit C",city:"Dearborn",state:"MI",zipCode:"48124-2889"},email:"dearborn-22022@qargocoffee.com",phone:"(734) 686-1192",paymentMethod:{type:"credit_card",cardNumber:"**** **** **** 4242",expiryDate:"12/25",cvv:"***",cardholderName:"JOHN NORT"}},M=()=>{const{items:t,total:o,clearCart:h}=f();y();const{addOrder:x}=N(),d=v(),i=localStorage.getItem("franchiseeBillingInfo"),[r,s]=u.useState(i?JSON.parse(i):j),[b,c]=u.useState(!1);p.useEffect(()=>{localStorage.setItem("franchiseeBillingInfo",JSON.stringify(r))},[r]),p.useEffect(()=>{t.length===0&&d("/cart")},[t.length,d]);const m=async a=>{a.preventDefault(),c(!0);try{const n=x({customerName:r.companyName,items:t.map(l=>({productId:l.product.id,name:l.product.name,quantity:l.quantity,price:l.product.price})),paymentMethod:{type:"Credit Card",lastFourDigits:r.paymentMethod.cardNumber.slice(-4)},total:o,billingInfo:r});h(),alert("¡Orden realizada con éxito! ID de la orden: "+n.id),d("/franchisee")}catch(n){console.error("Error al crear la orden:",n),alert("Hubo un error al procesar su orden. Por favor, inténtelo de nuevo.")}finally{c(!1)}};return e.jsx("div",{className:"container-custom py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-serif mb-6",children:"Checkout"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-medium mb-4",children:"Bill To"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),e.jsx("input",{type:"text",value:r.companyName,onChange:a=>s({...r,companyName:a.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Franchise Company Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DBA (Doing Business As)"}),e.jsx("input",{type:"text",value:r.dba,onChange:a=>s({...r,dba:a.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"DBA Name"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Billing Address"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx("input",{type:"text",value:r.billingAddress.street,onChange:a=>s({...r,billingAddress:{...r.billingAddress,street:a.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Street Address"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",value:r.billingAddress.city,onChange:a=>s({...r,billingAddress:{...r.billingAddress,city:a.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"City"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",value:r.billingAddress.state,onChange:a=>s({...r,billingAddress:{...r.billingAddress,state:a.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"State"}),e.jsx("input",{type:"text",value:r.billingAddress.zipCode,onChange:a=>s({...r,billingAddress:{...r.billingAddress,zipCode:a.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"ZIP Code"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:r.email,onChange:a=>s({...r,email:a.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Email Address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:r.phone,onChange:a=>s({...r,phone:a.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Phone Number"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-medium mb-4",children:"Payment Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number"}),e.jsx("input",{type:"text",value:r.paymentMethod.cardNumber,onChange:a=>s({...r,paymentMethod:{...r.paymentMethod,cardNumber:a.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"**** **** **** ****"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),e.jsx("input",{type:"text",value:r.paymentMethod.expiryDate,onChange:a=>s({...r,paymentMethod:{...r.paymentMethod,expiryDate:a.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"MM/YY"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVV"}),e.jsx("input",{type:"password",value:r.paymentMethod.cvv,onChange:a=>s({...r,paymentMethod:{...r.paymentMethod,cvv:a.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"***",maxLength:4})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cardholder Name"}),e.jsx("input",{type:"text",value:r.paymentMethod.cardholderName,onChange:a=>s({...r,paymentMethod:{...r.paymentMethod,cardholderName:a.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Name on card"})]})]})]})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6 sticky top-24",children:[e.jsx("h2",{className:"text-xl font-medium mb-4",children:"Order Summary"}),e.jsxs("div",{className:"space-y-4",children:[t.map(a=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[a.product.name," x ",a.quantity]}),e.jsx("span",{children:g(a.product.price*a.quantity)})]},a.product.id)),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:g(o)})]})}),e.jsx("button",{type:"submit",onClick:m,className:"w-full bg-primary-600 text-white py-3 px-4 rounded-lg hover:bg-primary-700 transition-colors",children:b?"Processing...":"Place Order"})]})]})})]})]})})};export{M as default};
