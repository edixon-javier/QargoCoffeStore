import{b as M,e as Q,j as e,i as Z}from"./index-C7lvD-aF.js";import{r as x}from"./vendor-CuftA7A4.js";import{u as _}from"./useOrderStatus-DPY-Uxo3.js";import{f}from"./utils-PDxtfP7g.js";import{P as G}from"./package-CSSmsS07.js";import{T as J}from"./truck-CEHcnamY.js";import{C as K}from"./chevron-up-R8GXxZ5K.js";import{C as X}from"./chevron-down-jf1wyHW5.js";import{S as ee}from"./shopping-bag-CtL4mQkh.js";import{D as se}from"./dollar-sign-8yBDDNPs.js";import{U as te}from"./users-B3yM90Rh.js";import{C as ae}from"./clock-Bu1x4Cxv.js";import{C as re}from"./check-circle-hxT4qfGV.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=M("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=M("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=M("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Ne=()=>{const{orders:c,updateOrder:O}=Q(),{customStatuses:h}=_(),[k,F]=x.useState(null),[v,L]=x.useState("all"),[y,R]=x.useState(""),[N,$]=x.useState("all"),[b,q]=x.useState("all"),[C,H]=x.useState("date-desc"),[S,I]=x.useState("orders"),[m,w]=x.useState("month"),D=x.useMemo(()=>{let s=[...c];if(v!=="all"&&(s=s.filter(a=>a.status===v)),y){const a=y.toLowerCase();s=s.filter(t=>{var r;return((r=t.orderNumber)==null?void 0:r.toLowerCase().includes(a))||t.customerName.toLowerCase().includes(a)||t.items.some(l=>l.name.toLowerCase().includes(a))})}if(N!=="all"){const a=new Date;let t=new Date;switch(N){case"today":{t.setHours(0,0,0,0),s=s.filter(r=>new Date(r.orderDate)>=t);break}case"yesterday":{t.setDate(t.getDate()-1),t.setHours(0,0,0,0);const r=new Date(t);r.setHours(23,59,59,999),s=s.filter(l=>{const d=new Date(l.orderDate);return d>=t&&d<=r});break}case"this-week":{t.setDate(t.getDate()-t.getDay()),t.setHours(0,0,0,0),s=s.filter(r=>new Date(r.orderDate)>=t);break}case"this-month":{t=new Date(a.getFullYear(),a.getMonth(),1),s=s.filter(r=>new Date(r.orderDate)>=t);break}case"last-month":{t=new Date(a.getFullYear(),a.getMonth()-1,1);const r=new Date(a.getFullYear(),a.getMonth(),0);s=s.filter(l=>{const d=new Date(l.orderDate);return d>=t&&d<=r});break}}}switch(b!=="all"&&(s=s.filter(a=>a.franchiseeId===b)),C){case"date-asc":s.sort((a,t)=>new Date(a.orderDate).getTime()-new Date(t.orderDate).getTime());break;case"date-desc":s.sort((a,t)=>new Date(t.orderDate).getTime()-new Date(a.orderDate).getTime());break;case"total-asc":s.sort((a,t)=>a.total-t.total);break;case"total-desc":s.sort((a,t)=>t.total-a.total);break;case"status":s.sort((a,t)=>a.status.localeCompare(t.status));break;default:s.sort((a,t)=>new Date(t.orderDate).getTime()-new Date(a.orderDate).getTime())}return s},[c,v,y,N,b,C]),o=x.useMemo(()=>{const s=new Date,a=new Date;switch(m){case"day":a.setHours(0,0,0,0);break;case"week":a.setDate(a.getDate()-7);break;case"month":a.setMonth(a.getMonth()-1);break;case"year":a.setFullYear(a.getFullYear()-1);break}const t=c.filter(n=>new Date(n.orderDate)>=a&&new Date(n.orderDate)<=s),r=h.reduce((n,i)=>(n[i.name]=t.filter(j=>j.status===i.name).length,n),{}),l=t.reduce((n,i)=>n+i.total,0),d={};t.forEach(n=>{n.items.forEach(i=>{d[i.productId]||(d[i.productId]={count:0,name:i.name}),d[i.productId].count+=i.quantity})});const g=Object.values(d).sort((n,i)=>i.count-n.count).slice(0,5),p=t.filter(n=>n.status==="Delivered");let u=0;p.length>0&&(u=p.reduce((i,j)=>{var P;const Y=new Date(j.orderDate),V=new Date(((P=j.statusHistory.find(W=>W.status==="Delivered"))==null?void 0:P.date)||j.orderDate);return i+(V.getTime()-Y.getTime())},0)/p.length/(1e3*60*60*24));const z=new Set(t.map(n=>n.franchiseeId)),T={};return m!=="day"&&t.forEach(n=>{const i=new Date(n.orderDate).toISOString().split("T")[0];T[i]=(T[i]||0)+1}),{totalOrders:t.length,ordersByStatus:r,totalRevenue:l,topProducts:g,avgDeliveryTime:u,uniqueCustomers:z.size,ordersPerDay:T}},[m,h,c]),E=x.useMemo(()=>{const s=new Set,a={};return c.forEach(t=>{t.franchiseeId&&(s.add(t.franchiseeId),a[t.franchiseeId]=t.customerName)}),Array.from(s).map(t=>({id:t,name:a[t]||t}))},[c]),A=(s,a)=>{const t=c.find(r=>r.id===s);t&&t.status!==a&&O(s,{status:a})},U=(s,a)=>{const t=c.find(r=>r.id===s);t&&t.trackingNumber!==a&&O(s,{trackingNumber:a})},B=()=>{let s=`ID,Order Number,Customer,Date,Status,Total (USD),Payment Method,Tracking Number
`;D.forEach(l=>{const g=[l.id,l.orderNumber||"",l.customerName,new Date(l.orderDate).toLocaleDateString("en-US"),l.status,f(l.total).replace("$",""),l.paymentMethod.type,l.trackingNumber||""].map(p=>{const u=String(p);return u.includes(",")?`"${u}"`:u});s+=g.join(",")+`
`});const a=new Blob([s],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(a),r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download",`orders_${new Date().toISOString().slice(0,10)}.csv`),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Order Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and track all orders from a centralized dashboard"})]}),e.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>I("orders"),className:`px-4 py-2 rounded-md ${S==="orders"?"bg-white shadow-sm text-gray-800":"text-gray-600 hover:text-gray-800"}`,children:"Orders"}),e.jsx("button",{onClick:()=>I("stats"),className:`px-4 py-2 rounded-md ${S==="stats"?"bg-white shadow-sm text-gray-800":"text-gray-600 hover:text-gray-800"}`,children:"Statistics"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:B,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 flex items-center gap-2 text-sm font-medium",children:[e.jsx(ne,{size:16}),"Export CSV"]}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx(ie,{size:16}),"Refresh"]})]})]}),S==="orders"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Filters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative w-full max-w-md",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 ",children:e.jsx(Z,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),e.jsx("input",{type:"text",value:y,onChange:s=>R(s.target.value),placeholder:"Search orders, customers, or products","aria-label":"Search orders, customers, or products",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:v,onChange:s=>L(s.target.value),className:"p-2 w-full border rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All states"}),h.map(s=>e.jsx("option",{value:s.name,children:s.name},s.name))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),e.jsxs("select",{value:N,onChange:s=>$(s.target.value),className:"p-2 w-full border rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Dates"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"yesterday",children:"Yesterday"}),e.jsx("option",{value:"this-week",children:"This Week"}),e.jsx("option",{value:"this-month",children:"This Month"}),e.jsx("option",{value:"last-month",children:"Last Month"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer"}),e.jsxs("select",{value:b,onChange:s=>q(s.target.value),className:"p-2 w-full border rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All customers"}),E.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Order By:"}),e.jsxs("select",{value:C,onChange:s=>H(s.target.value),className:"p-2 border rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"date-desc",children:"Date (Newest First)"}),e.jsx("option",{value:"date-asc",children:"Date (Oldest First)"}),e.jsx("option",{value:"total-desc",children:"Total (Highest First)"}),e.jsx("option",{value:"total-asc",children:"Total (Lowest First)"}),e.jsx("option",{value:"status",children:"Status"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",D.length," of ",c.length," orders"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Status Overview"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:h.map(s=>e.jsxs("div",{className:"p-3 rounded-lg text-center border",style:{backgroundColor:s.color+"20",borderColor:s.color},children:[e.jsx("span",{className:"font-medium",style:{color:s.color},children:s.name}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:c.filter(a=>a.status===s.name).length}),e.jsx("div",{className:"text-xs text-gray-500",children:"orders"})]},s.id))})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-soft",children:D.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(G,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No orders found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Try different filters"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:D.map(s=>{var a,t;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:"text-lg font-medium",children:["Order #",s.orderNumber]}),e.jsx("div",{className:"px-2 py-1 text-xs rounded-full",style:{backgroundColor:((a=h.find(r=>r.name===s.status))==null?void 0:a.color)+"20",color:(t=h.find(r=>r.name===s.status))==null?void 0:t.color},children:s.status})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.billingInfo.companyName," -"," ",f(s.total)]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsx("span",{children:new Date(s.orderDate).toLocaleDateString()}),e.jsxs("span",{children:[s.items.length," ",s.items.length===1?"product":"products"]}),e.jsx("span",{children:s.paymentMethod.type})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("select",{value:s.status,onChange:r=>A(s.id,r.target.value),className:"p-2 border rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:h.map(r=>e.jsx("option",{value:r.name,children:r.name},r.id))}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(J,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Tracking #",value:s.trackingNumber||"",onChange:r=>U(s.id,r.target.value),className:"pl-9 p-2 border rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsx("button",{onClick:()=>F(k===s.id?null:s.id),className:"p-2 text-gray-500 hover:text-gray-700 border rounded-md hover:bg-gray-50",children:k===s.id?e.jsx(K,{className:"h-5 w-5"}):e.jsx(X,{className:"h-5 w-5"})})]})]}),k===s.id&&e.jsx("div",{className:"mt-6 border-t pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Order Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Order ID"}),e.jsx("div",{children:s.id})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Customer"}),e.jsx("div",{children:s.customerName})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Shipping Address"}),e.jsx("div",{children:s.billingInfo.shippingAddress.street}),e.jsxs("div",{children:[s.billingInfo.shippingAddress.city,","," ",s.billingInfo.shippingAddress.state," ",s.billingInfo.shippingAddress.zipCode]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Contact"}),e.jsx("div",{children:s.billingInfo.email}),e.jsx("div",{children:s.billingInfo.phone})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Payment & Tracking"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Payment Method"}),e.jsxs("div",{children:[s.paymentMethod.type," ****"," ",s.paymentMethod.lastFourDigits]})]}),s.trackingNumber&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Tracking Number"}),e.jsx("div",{children:s.trackingNumber})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Status History"}),e.jsx("div",{className:"ml-0 space-y-1 mt-2",children:s.statusHistory.map((r,l)=>{var d;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:((d=h.find(g=>g.name===r.status))==null?void 0:d.color)||"#888"}}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:r.status})," ","-"," ",new Date(r.date).toLocaleDateString()," ",new Date(r.date).toLocaleTimeString()]})]},l)})})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Order Items"}),e.jsxs("div",{className:"space-y-3",children:[s.items.map((r,l)=>e.jsxs("div",{className:"flex justify-between border-b pb-2",children:[e.jsxs("div",{children:[e.jsx("div",{children:r.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Quantity: ",r.quantity]})]}),e.jsx("div",{className:"font-medium",children:f(r.price*r.quantity)})]},l)),e.jsx("div",{className:"pt-2 font-medium",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:f(s.total)})]})})]})]})]})})]},s.id)})})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-soft p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Statistics & Analytics"}),e.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>w("day"),className:`px-3 py-1 text-sm rounded-md ${m==="day"?"bg-white shadow-sm text-gray-800":"text-gray-600 hover:text-gray-800"}`,children:"Today"}),e.jsx("button",{onClick:()=>w("week"),className:`px-3 py-1 text-sm rounded-md ${m==="week"?"bg-white shadow-sm text-gray-800":"text-gray-600 hover:text-gray-800"}`,children:"This Week"}),e.jsx("button",{onClick:()=>w("month"),className:`px-3 py-1 text-sm rounded-md ${m==="month"?"bg-white shadow-sm text-gray-800":"text-gray-600 hover:text-gray-800"}`,children:"This Month"}),e.jsx("button",{onClick:()=>w("year"),className:`px-3 py-1 text-sm rounded-md ${m==="year"?"bg-white shadow-sm text-gray-800":"text-gray-600 hover:text-gray-800"}`,children:"This Year"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Orders"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:o.totalOrders})]}),e.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(ee,{className:"h-6 w-6 text-blue-600"})})]}),m!=="day"&&e.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["In the last"," ",m==="week"?"7 days":m==="month"?"30 days":"12 months"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-soft p-6",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:f(o.totalRevenue)})]}),e.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(se,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-soft p-6",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Active Customers"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:o.uniqueCustomers})]}),e.jsx("div",{className:"h-12 w-12 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(te,{className:"h-6 w-6 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-soft p-6",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Average Delivery Time"}),e.jsxs("p",{className:"text-3xl font-bold mt-2",children:[o.avgDeliveryTime.toFixed(1)," days"]})]}),e.jsx("div",{className:"h-12 w-12 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(ae,{className:"h-6 w-6 text-yellow-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Orders by Status"}),e.jsx("div",{className:"h-64 flex items-end justify-around",children:Object.entries(o.ordersByStatus).map(([s,a])=>{const t=h.find(d=>d.name===s),r=Math.max(...Object.values(o.ordersByStatus)),l=r>0?a/r*100:0;return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:a}),e.jsx("div",{className:"w-12 rounded-t-md",style:{height:`${Math.max(l,5)}%`,backgroundColor:(t==null?void 0:t.color)||"#888"}}),e.jsx("div",{className:"text-xs mt-2 text-center max-w-[80px] truncate",children:s})]},s)})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Most Popular Products"}),e.jsx("div",{className:"space-y-4",children:o.topProducts.length>0?o.topProducts.map((s,a)=>{const t=o.topProducts[0].count,r=s.count/t*100;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:s.name}),e.jsxs("span",{className:"font-medium",children:[s.count," units"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${r}%`}})})]},a)}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No data available"})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6 lg:col-span-2",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Order Trends"}),m!=="day"&&Object.keys(o.ordersPerDay).length>0?e.jsx("div",{className:"h-64 flex items-end justify-between",children:Object.entries(o.ordersPerDay).sort(([s],[a])=>s.localeCompare(a)).slice(-14).map(([s,a])=>{const t=Math.max(...Object.values(o.ordersPerDay)),r=t>0?a/t*100:0,l=new Date(s).toLocaleDateString("en-US",{day:"2-digit",month:"short"});return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-sm mb-1",children:a}),e.jsx("div",{className:"w-8 rounded-t-md bg-blue-500",style:{height:`${Math.max(r,5)}%`}}),e.jsx("div",{className:"text-xs mt-2 rotate-45 origin-top-left",children:l})]},s)})}):e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:"Not enough data to display a trend"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6 lg:col-span-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Orders Requiring Attention"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-500",children:[e.jsx(le,{size:16}),"Requires immediate action"]})]}),c.filter(s=>s.status==="Pending"&&new Date().getTime()-new Date(s.orderDate).getTime()>3*24*60*60*1e3).length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(re,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("p",{children:"All orders are up to date!"})]}):e.jsx("div",{className:"space-y-4",children:c.filter(s=>s.status==="Pending"&&new Date().getTime()-new Date(s.orderDate).getTime()>3*24*60*60*1e3).map(s=>e.jsxs("div",{className:"flex justify-between items-center p-4 border rounded-lg bg-red-50 border-red-200",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["Order #",s.orderNumber]}),e.jsx("div",{className:"text-sm text-gray-600",children:s.customerName}),e.jsxs("div",{className:"text-xs text-gray-500",children:[new Date(s.orderDate).toLocaleDateString()," (",Math.floor((new Date().getTime()-new Date(s.orderDate).getTime())/(1e3*60*60*24))," ","days)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("select",{value:s.status,onChange:a=>A(s.id,a.target.value),className:"p-2 border rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:h.map(a=>e.jsx("option",{value:a.name,children:a.name},a.id))}),e.jsx("button",{onClick:()=>F(s.id),className:"p-2 bg-white text-gray-600 hover:text-gray-800 rounded-md border",children:"View details"})]})]},s.id))})]})]})]})]})};export{Ne as default};
