import{u as y,d as N,e as v,j as e}from"./index-BY5_m-nD.js";import{b as j,r as p,d as g}from"./vendor-DPNQA5jQ.js";import{f as h}from"./utils-PDxtfP7g.js";const C={companyName:"Prestige Cafe",dba:"Qargo Connet Dearborne",billingAddress:{street:"22022 Michigan Ave Unit C",city:"Dearborn",state:"MI",zipCode:"48124-2889"},shippingAddress:{street:"22022 Michigan Ave Unit C",city:"Dearborn",state:"MI",zipCode:"48124-2889"},email:"dearborn-22022@qargocoffee.com",phone:"(734) 686-1192",paymentMethod:{type:"credit_card",cardNumber:"**** **** **** 4242",expiryDate:"12/25",cvv:"***",cardholderName:"JOHN NORT"}},I=()=>{const{items:t,total:i,clearCart:x}=y(),{user:n}=N(),{addOrder:b}=v(),o=j(),c=localStorage.getItem("franchiseeBillingInfo"),[r,s]=p.useState(c?JSON.parse(c):C),[f,m]=p.useState(!1);g.useEffect(()=>{localStorage.setItem("franchiseeBillingInfo",JSON.stringify(r))},[r]),g.useEffect(()=>{t.length===0&&o("/cart")},[t.length,o]);const u=async a=>{a.preventDefault(),m(!0);try{const d=b({customerName:r.companyName,items:t.map(l=>({productId:l.product.id,name:l.product.name,quantity:l.quantity,price:l.product.price})),paymentMethod:{type:"Credit Card",lastFourDigits:r.paymentMethod.cardNumber.slice(-4)},total:i,billingInfo:r,franchiseeId:n==null?void 0:n.franchiseeId});console.log("Nueva orden creada:",d),x(),alert("Order successfully placed! Order ID: "+d.id),o("/franchisee")}catch(d){console.error("Error creating order:",d),alert("There was an error processing your order. Please try again.")}finally{m(!1)}};return e.jsx("div",{className:"container-custom py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-serif mb-6",children:"Checkout"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-medium mb-4",children:"Bill To"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),e.jsx("input",{type:"text",value:r.companyName,onChange:a=>s({...r,companyName:a.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Franchise Company Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DBA (Doing Business As)"}),e.jsx("input",{type:"text",value:r.dba,onChange:a=>s({...r,dba:a.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"DBA Name"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Billing Address"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx("input",{type:"text",value:r.billingAddress.street,onChange:a=>s({...r,billingAddress:{...r.billingAddress,street:a.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Street Address"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",value:r.billingAddress.city,onChange:a=>s({...r,billingAddress:{...r.billingAddress,city:a.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"City"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",value:r.billingAddress.state,onChange:a=>s({...r,billingAddress:{...r.billingAddress,state:a.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"State"}),e.jsx("input",{type:"text",value:r.billingAddress.zipCode,onChange:a=>s({...r,billingAddress:{...r.billingAddress,zipCode:a.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"ZIP Code"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:r.email,onChange:a=>s({...r,email:a.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Email Address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:r.phone,onChange:a=>s({...r,phone:a.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Phone Number"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-medium mb-4",children:"Payment Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number"}),e.jsx("input",{type:"text",value:r.paymentMethod.cardNumber,onChange:a=>s({...r,paymentMethod:{...r.paymentMethod,cardNumber:a.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"**** **** **** ****"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),e.jsx("input",{type:"text",value:r.paymentMethod.expiryDate,onChange:a=>s({...r,paymentMethod:{...r.paymentMethod,expiryDate:a.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"MM/YY"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVV"}),e.jsx("input",{type:"password",value:r.paymentMethod.cvv,onChange:a=>s({...r,paymentMethod:{...r.paymentMethod,cvv:a.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"***",maxLength:4})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cardholder Name"}),e.jsx("input",{type:"text",value:r.paymentMethod.cardholderName,onChange:a=>s({...r,paymentMethod:{...r.paymentMethod,cardholderName:a.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Name on card"})]})]})]})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6 sticky top-24",children:[e.jsx("h2",{className:"text-xl font-medium mb-4",children:"Order Summary"}),e.jsxs("div",{className:"space-y-4",children:[t.map(a=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[a.product.name," x ",a.quantity]}),e.jsx("span",{children:h(a.product.price*a.quantity)})]},a.product.id)),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:h(i)})]})}),e.jsx("button",{type:"submit",onClick:u,className:"w-full bg-primary-600 text-white py-3 px-4 rounded-lg hover:bg-primary-700 transition-colors",children:f?"Processing...":"Place Order"})]})]})})]})]})})};export{I as default};
