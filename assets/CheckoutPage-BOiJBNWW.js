import{u as w,d as M,e as A,j as e}from"./index-C-7ieaEP.js";import{b as k,r as n,d as b}from"./vendor-DPNQA5jQ.js";import{f}from"./utils-PDxtfP7g.js";const S={companyName:"Prestige Cafe",dba:"Qargo Connet Dearborne",billingAddress:{street:"22022 Michigan Ave Unit C",city:"Dearborn",state:"MI",zipCode:"48124-2889"},shippingAddress:{street:"22022 Michigan Ave Unit C",city:"Dearborn",state:"MI",zipCode:"48124-2889"},email:"dearborn-22022@qargocoffee.com",phone:"(734) 686-1192",paymentMethod:{type:"credit_card",cardNumber:"**** **** **** 4242",expiryDate:"12/25",cvv:"***",cardholderName:"JOHN NORT"}},B=()=>{const{items:l,total:c,clearCart:y}=w(),{user:d}=M(),{addOrder:N}=A(),o=k(),m=localStorage.getItem("franchiseeBillingInfo"),[r,a]=n.useState(m?JSON.parse(m):S),[j,u]=n.useState(!1),[v,p]=n.useState(!1),[g,C]=n.useState(!0);b.useEffect(()=>{localStorage.setItem("franchiseeBillingInfo",JSON.stringify(r))},[r]),b.useEffect(()=>{l.length===0&&g&&o("/franchisee")},[l.length,g,o]);const h=async s=>{s.preventDefault(),u(!0);try{const i=N({customerName:r.companyName,items:l.map(t=>{var x;return{productId:t.product.id,name:t.product.name,quantity:t.quantity,price:t.product.price,image:((x=t.product.images)==null?void 0:x[0])||null}}),paymentMethod:{type:"Credit Card",lastFourDigits:r.paymentMethod.cardNumber.slice(-4)},total:c,billingInfo:r,franchiseeId:d==null?void 0:d.franchiseeId});console.log("Nueva orden creada:",i),C(!1),y(),p(!0),setTimeout(()=>{p(!1),o("/franchisee")},1500)}catch(i){console.error("Error creating order:",i),alert("There was an error processing your order. Please try again.")}finally{u(!1)}};return e.jsxs("div",{className:"container-custom py-8",children:[v&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm transition-opacity",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-10 flex flex-col items-center space-y-4 animate-pop-in min-w-[340px] max-w-sm",children:[e.jsxs("svg",{className:"w-16 h-16 text-green-500 mb-2 animate-bounce-in",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"#e6f9ed"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12l3 3.5 5-6"})]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 text-center",children:"Order Confirmed"}),e.jsx("p",{className:"text-gray-600 text-sm text-center",children:"Your order has been successfully placed. You will be redirected to your dashboard shortly."})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-serif mb-6",children:"Checkout"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-medium mb-4",children:"Bill To"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),e.jsx("input",{type:"text",value:r.companyName,onChange:s=>a({...r,companyName:s.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Franchise Company Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DBA (Doing Business As)"}),e.jsx("input",{type:"text",value:r.dba,onChange:s=>a({...r,dba:s.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"DBA Name"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Billing Address"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx("input",{type:"text",value:r.billingAddress.street,onChange:s=>a({...r,billingAddress:{...r.billingAddress,street:s.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Street Address"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",value:r.billingAddress.city,onChange:s=>a({...r,billingAddress:{...r.billingAddress,city:s.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"City"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",value:r.billingAddress.state,onChange:s=>a({...r,billingAddress:{...r.billingAddress,state:s.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"State"}),e.jsx("input",{type:"text",value:r.billingAddress.zipCode,onChange:s=>a({...r,billingAddress:{...r.billingAddress,zipCode:s.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"ZIP Code"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:r.email,onChange:s=>a({...r,email:s.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Email Address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:r.phone,onChange:s=>a({...r,phone:s.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Phone Number"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6",children:[e.jsx("h2",{className:"text-xl font-medium mb-4",children:"Payment Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number"}),e.jsx("input",{type:"text",value:r.paymentMethod.cardNumber,onChange:s=>a({...r,paymentMethod:{...r.paymentMethod,cardNumber:s.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"**** **** **** ****"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),e.jsx("input",{type:"text",value:r.paymentMethod.expiryDate,onChange:s=>a({...r,paymentMethod:{...r.paymentMethod,expiryDate:s.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"MM/YY"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVV"}),e.jsx("input",{type:"password",value:r.paymentMethod.cvv,onChange:s=>a({...r,paymentMethod:{...r.paymentMethod,cvv:s.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"***",maxLength:4})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cardholder Name"}),e.jsx("input",{type:"text",value:r.paymentMethod.cardholderName,onChange:s=>a({...r,paymentMethod:{...r.paymentMethod,cardholderName:s.target.value}}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Name on card"})]})]})]})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6 sticky top-24",children:[e.jsx("h2",{className:"text-xl font-medium mb-4",children:"Order Summary"}),e.jsxs("div",{className:"space-y-4",children:[l.map(s=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[s.product.name," x ",s.quantity]}),e.jsx("span",{children:f(s.product.price*s.quantity)})]},s.product.id)),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:f(c)})]})}),e.jsx("button",{type:"submit",onClick:h,className:"w-full bg-primary-600 text-white py-3 px-4 rounded-lg hover:bg-primary-700 transition-colors",children:j?"Processing...":"Place Order"})]})]})})]})]})]})};export{B as default};
