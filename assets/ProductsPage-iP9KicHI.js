import{m as Z,j as e,k as _,i as ee,c as se}from"./index-BThHGMjS.js";import{b as te,r,d as ae}from"./vendor-DPNQA5jQ.js";import{m as re}from"./mockSuppliers-Buh3I-tH.js";import"./Button-FAyWh7Zk.js";import{M as ie}from"./Modal-DfbqNuR8.js";import{P as le}from"./index-Do299_Sn.js";import{f as L}from"./utils-PDxtfP7g.js";import{P as ce,E as ne}from"./plus-circle-CmHQo4TF.js";import{F as oe}from"./filter-Ct-v4xQC.js";import{D as de}from"./dollar-sign-DFXo25uT.js";import{A as c}from"./arrow-up-down-BMM3agyD.js";import{T as me}from"./tag-tYAPicr9.js";import{S as xe}from"./square-pen-BYwf-4LP.js";import{X as pe}from"./x-circle-DvltVPkE.js";import{C as ue}from"./check-circle-BImKH2DZ.js";import{T as he}from"./trash-2-CCvL3-tC.js";import"./chevron-right-X9wncpKX.js";import"./chevron-down-B2fcfR0r.js";const ge=()=>{const y=te(),[d,f]=r.useState([]),[I,R]=r.useState(!0),[j,S]=r.useState(""),[P,m]=r.useState(!1),[N,A]=r.useState(null),[x,z]=r.useState("all"),[v,D]=r.useState("all"),[b,M]=r.useState("all"),[i,w]=r.useState({min:"",max:""}),[k,$]=r.useState(1),[p]=r.useState(10),[t,O]=r.useState({key:"name",direction:"asc"}),[U,q]=r.useState([]);r.useEffect(()=>{const s=setTimeout(()=>{f(Z),q(re),R(!1)},800);return()=>clearTimeout(s)},[]);const F=ae.useMemo(()=>{const s=[...d];return t.key&&s.sort((a,n)=>{var u,h;if(t.key==="supplier.name"){const g=((u=a.supplier)==null?void 0:u.name)||"",o=((h=n.supplier)==null?void 0:h.name)||"";return t.direction==="asc"?g.localeCompare(o):o.localeCompare(g)}return a[t.key]<n[t.key]?t.direction==="asc"?-1:1:a[t.key]>n[t.key]?t.direction==="asc"?1:-1:0}),s},[d,t]).filter(s=>{var o,E;const a=s.name.toLowerCase().includes(j.toLowerCase())||s.sku.toLowerCase().includes(j.toLowerCase()),n=x==="all"||x==="active"&&s.isActive||x==="inactive"&&!s.isActive,u=v==="all"||((o=s.category)==null?void 0:o.id)===v,h=b==="all"||((E=s.supplier)==null?void 0:E.id)===b,g=(!i.min||s.price>=Number(i.min))&&(!i.max||s.price<=Number(i.max));return a&&n&&u&&h&&g}),C=F.length,K=Math.ceil(C/p),V=(k-1)*p,X=Math.min(k*p,C),T=F.slice(V,X),l=s=>{let a="asc";t.key===s&&t.direction==="asc"&&(a="desc"),O({key:s,direction:a})},B=()=>{y("/admin/products/new")},G=s=>{y(`/admin/products/edit/${s.id}`)},H=s=>{y(`/admin/products/${s.id}`)},J=s=>{A(s),m(!0)},Q=()=>{N&&(f(d.filter(s=>s.id!==N.id)),m(!1),A(null))},W=s=>{f(d.map(a=>a.id===s.id?{...a,isActive:!a.isActive}:a))},Y=()=>{S(""),z("all"),D("all"),M("all"),w({min:"",max:""})};return I?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(_,{})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Product Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage your products, stock levels, and key details"})]}),e.jsxs("button",{onClick:B,className:"flex items-center gap-2 bg-primary-600 hover:bg-primary-700 text-white py-2 px-4 rounded-lg transition-colors",children:[e.jsx(ce,{size:18}),e.jsx("span",{className:"font-medium",children:"Add New Product"})]})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-md",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-grow max-w-md",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or SKU...",value:j,onChange:s=>S(s.target.value),className:"w-full rounded-md border border-gray-200 py-2 pl-10 pr-4 focus:border-primary focus:outline-none"})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Filter:"})]}),e.jsxs("select",{value:x,onChange:s=>z(s.target.value),className:"rounded-md border border-gray-200 px-3 py-2 focus:border-primary focus:outline-none",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),e.jsxs("select",{value:v,onChange:s=>D(s.target.value),className:"rounded-md border border-gray-200 px-3 py-2 focus:border-primary focus:outline-none",children:[e.jsx("option",{value:"all",children:"All Categories"}),se.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsxs("select",{value:b,onChange:s=>M(s.target.value),className:"rounded-md border border-gray-200 px-3 py-2 focus:border-primary focus:outline-none",children:[e.jsx("option",{value:"all",children:"All Suppliers"}),U.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Price Range:"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",placeholder:"Min",value:i.min,onChange:s=>w({...i,min:s.target.value}),className:"w-24 rounded-md border border-gray-200 px-3 py-2 focus:border-primary focus:outline-none"}),e.jsx("span",{className:"text-gray-500",children:"-"}),e.jsx("input",{type:"number",placeholder:"Max",value:i.max,onChange:s=>w({...i,max:s.target.value}),className:"w-24 rounded-md border border-gray-200 px-3 py-2 focus:border-primary focus:outline-none"})]}),e.jsx("button",{onClick:Y,className:"rounded-md border border-gray-200 px-3 py-2 text-sm text-gray-600 hover:bg-gray-50",children:"Reset Filters"})]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg bg-white shadow-md",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:e.jsxs("div",{className:"flex cursor-pointer items-center gap-1",onClick:()=>l("name"),children:["Product Name",t.key==="name"&&e.jsx(c,{size:16,className:t.direction==="asc"?"transform rotate-180":""})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:e.jsxs("div",{className:"flex cursor-pointer items-center gap-1",onClick:()=>l("sku"),children:["SKU",t.key==="sku"&&e.jsx(c,{size:16,className:t.direction==="asc"?"transform rotate-180":""})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:e.jsxs("div",{className:"flex cursor-pointer items-center gap-1",onClick:()=>l("price"),children:["Price",t.key==="price"&&e.jsx(c,{size:16,className:t.direction==="asc"?"transform rotate-180":""})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:e.jsxs("div",{className:"flex cursor-pointer items-center gap-1",onClick:()=>l("category.name"),children:["Category",t.key==="category.name"&&e.jsx(c,{size:16,className:t.direction==="asc"?"transform rotate-180":""})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:e.jsxs("div",{className:"flex cursor-pointer items-center gap-1",onClick:()=>l("supplier.name"),children:["Supplier",t.key==="supplier.name"&&e.jsx(c,{size:16,className:t.direction==="asc"?"transform rotate-180":""})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:e.jsxs("div",{className:"flex cursor-pointer items-center gap-1",onClick:()=>l("stock"),children:["Stock",t.key==="stock"&&e.jsx(c,{size:16,className:t.direction==="asc"?"transform rotate-180":""})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:T.length>0?T.map((s,a)=>e.jsxs("tr",{className:`hover:bg-gray-100 ${a%2===0?"bg-gray-50":"bg-white"}`,children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:s.images&&s.images.length>0?e.jsx("img",{className:"h-10 w-10 rounded-md object-cover",src:s.images[0],alt:s.name}):e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-gray-100",children:e.jsx(me,{size:16,className:"text-gray-400"})})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name})})]})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-500",children:s.sku})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[L(s.price),s.salePrice&&s.salePrice<s.price&&e.jsxs("span",{className:"ml-2 text-xs text-green-600",children:["Sale: ",L(s.salePrice)]})]})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-500",children:s.category.name})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-500",children:s.supplier.name})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsx("div",{className:`text-sm ${s.stock<5?"text-red-600 font-medium":"text-gray-500"}`,children:s.stock})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-medium ${s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>H(s),className:"text-gray-400 hover:text-gray-500",title:"View Details",children:e.jsx(ne,{size:18})}),e.jsx("button",{onClick:()=>G(s),className:"text-blue-400 hover:text-blue-500",title:"Edit",children:e.jsx(xe,{size:18})}),e.jsx("button",{onClick:()=>W(s),className:`${s.isActive?"text-red-400 hover:text-red-500":"text-green-400 hover:text-green-500"}`,title:s.isActive?"Disable":"Enable",children:s.isActive?e.jsx(pe,{size:18}):e.jsx(ue,{size:18})}),e.jsx("button",{onClick:()=>J(s),className:"text-red-400 hover:text-red-500",title:"Delete",children:e.jsx(he,{size:18})})]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-4 text-center",children:e.jsx("div",{className:"text-gray-500",children:"No products found"})})})})]})}),K>1&&e.jsx(le,{totalItems:C,itemsPerPage:p,currentPage:k,onPageChange:$,itemName:"productos",previousLabel:"Anterior",nextLabel:"Siguiente",variant:"full",maxPageButtons:5}),P&&N&&e.jsx(ie,{title:"Delete Product",isOpen:P,onClose:()=>m(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirm Deletion"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Are you sure you want to delete this product? This action cannot be undone."}),e.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>m(!1),className:"rounded-lg border border-gray-300 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"button",onClick:Q,className:"rounded-lg bg-red-600 px-4 py-2 text-sm text-white hover:bg-red-700",children:"Delete Product"})]})]})})]})},Ie=()=>e.jsx(ge,{});export{Ie as default};
