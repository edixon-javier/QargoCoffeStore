import{b as C,j as e,k as I}from"./index-BVoD7YGt.js";import{b as A,e as k,r as m}from"./vendor-DPNQA5jQ.js";import{A as M}from"./arrow-left-xlvuW8jl.js";import{S}from"./store-DNfcW3QN.js";import{C as F}from"./credit-card-h7MZSIgC.js";import{S as E}from"./save-C5BeH7PU.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=C("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),P=[{id:"f1",name:"Prestige Cafe",email:"dearborn-22022@qargocoffee.com",role:"franchisee",createdAt:"2023-01-15T08:00:00Z",billingInfo:{companyName:"Prestige Cafe",dba:"Qargo Connect Dearborne",billingAddress:{street:"22022 Michigan Ave Unit C",city:"Dearborn",state:"MI",zipCode:"48124-2889"},shippingAddress:{street:"22022 Michigan Ave Unit C",city:"Dearborn",state:"MI",zipCode:"48124-2889"},email:"dearborn-22022@qargocoffee.com",phone:"(734) 686-1192",paymentMethod:{type:"credit_card",cardNumber:"**** **** **** 4242",expiryDate:"12/25",cvv:"***",cardholderName:"JOHN NORT"}}}],v={id:"",name:"",email:"",password:"",role:"franchisee",createdAt:new Date().toISOString(),billingInfo:{companyName:"",dba:"",billingAddress:{street:"",city:"",state:"",zipCode:""},shippingAddress:{street:"",city:"",state:"",zipCode:""},email:"",phone:"",paymentMethod:{type:"credit_card",cardNumber:"",expiryDate:"",cvv:"",cardholderName:""}}},Z=({mode:o})=>{const u=A(),{id:b}=k(),[r,p]=m.useState(v),[f,y]=m.useState(o==="edit"),[n,g]=m.useState({}),[h,j]=m.useState(!0);m.useEffect(()=>{if(o==="edit"&&b){const s=setTimeout(()=>{var i,c;const a=P.find(d=>d.id===b);if(a){p({...a,billingInfo:a.billingInfo||v.billingInfo});const d=(i=a.billingInfo)==null?void 0:i.billingAddress,l=(c=a.billingInfo)==null?void 0:c.shippingAddress;if(d&&l){const x=d.street===l.street&&d.city===l.city&&d.state===l.state&&d.zipCode===l.zipCode;j(x)}}y(!1)},1e3);return()=>clearTimeout(s)}},[b,o]),m.useEffect(()=>{h&&p(s=>({...s,billingInfo:{...s.billingInfo,billingAddress:{...s.billingInfo.shippingAddress}}}))},[h,r.billingInfo.shippingAddress]);const N=(s,a)=>{if(!a&&["name","email","companyName"].includes(s))return`${s} is required`;switch(s){case"email":return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)?"":"Invalid email format";case"phone":return a?/^[\d\s-()]+$/.test(a)?"":"Invalid phone format":"";case"password":return o==="create"&&!a?"Password is required":a&&a.length<6?"Password must be at least 6 characters":"";default:return""}},t=(s,a)=>{const{name:i,value:c}=s.target,d=N(i,c);g(d?l=>({...l,[i]:d}):l=>{const x={...l};return delete x[i],x}),p(a?a==="billingInfo"?l=>({...l,billingInfo:{...l.billingInfo,[i]:c}}):l=>({...l,billingInfo:{...l.billingInfo,[a]:{...l.billingInfo[a],[i]:c}}}):l=>({...l,[i]:c}))},w=async s=>{s.preventDefault();const a={};if(["name","email"].forEach(i=>{const c=r[i];if(typeof c=="string"){const d=N(i,c);d&&(a[i]=d)}}),o==="create"&&!r.password&&(a.password="La contraseña es obligatoria"),Object.keys(a).length>0){g(a),window.scrollTo({top:0,behavior:"smooth"});return}try{if(y(!0),await new Promise(i=>setTimeout(i,1e3)),o==="create"){const i={...r,id:`f${Math.floor(Math.random()*1e4)}`};console.log("Nuevo franquiciado creado:",i)}else console.log("Franquiciado actualizado:",r);u("/admin/franchisees")}catch(i){console.error("Error al guardar franquiciado:",i),g({form:"Error al guardar los cambios. Inténtalo de nuevo."})}finally{y(!1)}};return f?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(I,{})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>u("/admin/franchisees"),className:"flex items-center gap-1 text-gray-600 hover:text-gray-900",children:[e.jsx(M,{className:"h-5 w-5"}),e.jsx("span",{children:"Back"})]}),e.jsx("h1",{className:"text-2xl font-semibold",children:o==="create"?"Create New Franchisee":"Edit Franchisee"})]})}),n.form&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.form}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-6",children:[e.jsx("div",{className:"bg-blue-50 p-2 rounded-lg",children:e.jsx(S,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Account Information"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Franchisee portal access data"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:s=>t(s),className:`w-full p-2 border ${n.name?"border-red-500":"border-gray-300"} rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent`,placeholder:"Franchisee name",required:!0}),n.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"email",name:"email",value:r.email,onChange:s=>t(s),className:`w-full p-2 border ${n.email?"border-red-500":"border-gray-300"} rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent`,placeholder:"email@example.com",required:!0}),n.email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.email})]}),o==="create"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"password",name:"password",value:r.password||"",onChange:s=>t(s),className:`w-full p-2 border ${n.password?"border-red-500":"border-gray-300"} rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent`,placeholder:"Minimum 6 characters",required:o==="create"}),n.password&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.password})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-6",children:[e.jsx("div",{className:"bg-purple-50 p-2 rounded-lg",children:e.jsx(z,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Company Information"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Franchised company details"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Company Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",name:"companyName",value:r.billingInfo.companyName,onChange:s=>t(s,"billingInfo"),className:`w-full p-2 border ${n.companyName?"border-red-500":"border-gray-300"} rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent`,placeholder:"Company name"}),n.companyName&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.companyName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doing Business As (DBA)"}),e.jsx("input",{type:"text",name:"dba",value:r.billingInfo.dba,onChange:s=>t(s,"billingInfo"),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Business name"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Email"}),e.jsx("input",{type:"email",name:"email",value:r.billingInfo.email,onChange:s=>t(s,"billingInfo"),className:`w-full p-2 border ${n["billingInfo.email"]?"border-red-500":"border-gray-300"} rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent`,placeholder:"Contact email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:r.billingInfo.phone,onChange:s=>t(s,"billingInfo"),className:`w-full p-2 border ${n.phone?"border-red-500":"border-gray-300"} rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent`,placeholder:"(123) 456-7890"}),n.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.phone})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Shipping Address"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address"}),e.jsx("input",{type:"text",name:"street",value:r.billingInfo.shippingAddress.street,onChange:s=>t(s,"shippingAddress"),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Street address"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),e.jsx("input",{type:"text",name:"city",value:r.billingInfo.shippingAddress.city,onChange:s=>t(s,"shippingAddress"),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"City"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),e.jsx("input",{type:"text",name:"state",value:r.billingInfo.shippingAddress.state,onChange:s=>t(s,"shippingAddress"),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"State"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code"}),e.jsx("input",{type:"text",name:"zipCode",value:r.billingInfo.shippingAddress.zipCode,onChange:s=>t(s,"shippingAddress"),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"ZIP code"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Billing Address"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"useSameAddress",checked:h,onChange:s=>j(s.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"useSameAddress",className:"ml-2 text-sm text-gray-700",children:"Use same shipping address"})]})]}),!h&&e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address"}),e.jsx("input",{type:"text",name:"street",value:r.billingInfo.billingAddress.street,onChange:s=>t(s,"billingAddress"),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Street address"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),e.jsx("input",{type:"text",name:"city",value:r.billingInfo.billingAddress.city,onChange:s=>t(s,"billingAddress"),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"City"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),e.jsx("input",{type:"text",name:"state",value:r.billingInfo.billingAddress.state,onChange:s=>t(s,"billingAddress"),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"State"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code"}),e.jsx("input",{type:"text",name:"zipCode",value:r.billingInfo.billingAddress.zipCode,onChange:s=>t(s,"billingAddress"),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"ZIP code"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-soft p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-6",children:[e.jsx("div",{className:"bg-green-50 p-2 rounded-lg",children:e.jsx(F,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Payment Information"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Credit card details for payments"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number"}),e.jsx("input",{type:"text",name:"cardNumber",value:r.billingInfo.paymentMethod.cardNumber,onChange:s=>t(s,"paymentMethod"),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"**** **** **** ****"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),e.jsx("input",{type:"text",name:"expiryDate",value:r.billingInfo.paymentMethod.expiryDate,onChange:s=>t(s,"paymentMethod"),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"MM/YY"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVV"}),e.jsx("input",{type:"password",name:"cvv",value:r.billingInfo.paymentMethod.cvv,onChange:s=>t(s,"paymentMethod"),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"***",maxLength:4})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cardholder Name"}),e.jsx("input",{type:"text",name:"cardholderName",value:r.billingInfo.paymentMethod.cardholderName,onChange:s=>t(s,"paymentMethod"),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Cardholder name"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>u("/admin/franchisees"),className:"py-2 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:f,className:"flex items-center gap-2 py-2 px-4 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[f&&e.jsx("div",{className:"animate-spin h-4 w-4 border-t-2 border-white rounded-full"}),e.jsx(E,{className:"h-5 w-5"}),e.jsx("span",{children:o==="create"?"Create Franchisee":"Save Changes"})]})]})]})]})};export{Z as F};
